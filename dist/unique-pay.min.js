!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="/",n(n.s=2)}([function(e,n,t){function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),a=function(){function e(){o(this,e),"undefined"!=typeof $globalConfig&&$globalConfig.navigator||(window.$globalConfig={navigator:{isWechat:null!==navigator.userAgent.match(/(MicroMessenger)\/([\d\.]+)/i),isAlipay:null!==navigator.userAgent.match(/(AlipayClient)\/([\d\.]+)/i)}})}return i(e,[{key:"pay",value:function(e){return $globalConfig.navigator.isWechat?this.wechatPay(e):$globalConfig.navigator.isAlipay?this.aliPay(e):new Promise(function(){})}},{key:"wechatPay",value:function(e){return new Promise(function(n,t){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void t({message:"唤起微信支付参数错误，参数[options]："+JSON.stringify(e)});c().then(function(){WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){"get_brand_wcpay_request:ok"===e.err_msg?n({code:(e.err_msg||"").split(":")[1]||"ok",message:e.errMsg||e.err_desc||""}):t({code:(e.err_msg||"").split(":")[1]||"fail",message:e.errMsg||e.err_desc||"支付失败"})})})})}},{key:"aliPay",value:function(e){return new Promise(function(n,t){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void t({message:"唤起支付宝参数错误，参数[options]："+JSON.stringify(e)});c().then(function(){AlipayJSBridge.call("tradePay",e,function(e){switch(e.code=e.resultCode,e.resultCode){case"9000":n(e);break;case"8000":case"6004":e.message="支付处理中，请稍后在您的订单中查看",t(e);break;case"6001":case"99":break;default:e.message="支付异常,请关闭页面后重试",t(e)}})})})}}]),e}(),c=function(){return new Promise(function(e,n){$globalConfig.navigator.isWechat?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e():$globalConfig.navigator.isAlipay&&(window.AlipayJSBridge?e():document.addEventListener("AlipayJSBridgeReady",e,!1))})};"object"===r(n)&&void 0!==e?e.exports=new a:window.UniquePay=new a},function(e,n,t){(function(o){function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),c=function(){function e(){r(this,e),"undefined"!=typeof $globalConfig&&$globalConfig.navigator||(window.$globalConfig={navigator:{isWechat:null!==navigator.userAgent.match(/(MicroMessenger)\/([\d\.]+)/i),isAlipay:null!==navigator.userAgent.match(/(AlipayClient)\/([\d\.]+)/i)}}),this.init()}return a(e,[{key:"init",value:function(){($globalConfig.navigator.isWechat||$globalConfig.navigator.isAlipay)&&this.loadJS($globalConfig.navigator.isWechat?"//res.wx.qq.com/open/js/jweixin-1.2.0.js":"//a.alipayobjects.com/g/component/antbridge/1.1.4/antbridge.min.js")}},{key:"loadJS",value:function(e){if(!e||""===e)return void console.error("UniquePay init fail , path : null");var n=document.createElement("script");n.src=location.protocol+e,n.onload=function(){console.log("UniquePay init success !!! ")},n.onerror=function(){console.error("UniquePay init fail , path : ",e)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}},{key:"pay",value:function(e,n){return $globalConfig.navigator.isWechat?this.wechatPay(e,n):$globalConfig.navigator.isAlipay?this.aliPay(e):new Promise(function(){})}},{key:"wechatPay",value:function(e,n){var r=this;return new Promise(function(i,a){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void a({message:"唤起微信支付参数错误，参数[options]："+JSON.stringify(e)});var c=function(){e.success=function(e){i({code:(e.err_msg||"").split(":")[1]||"ok",message:e.errMsg||e.err_desc||""})},e.cancel=function(e){a({code:(e.err_msg||"").split(":")[1]||"cancel",message:e.errMsg||e.err_desc||"支付取消"})},e.fail=function(e){a({code:(e.err_msg||"").split(":")[1]||"fail",message:e.errMsg||e.err_desc||"支付失败"})},wx.chooseWXPay(e)};!0!==r.signature&&n?(n.debug=n.debug||void 0!==o&&"production"!==(t.i({NODE_ENV:"production"})||{}).NODE_ENV,n.jsApiList=["checkJsApi","chooseWXPay"],wx.config(n),wx.ready(function(){r.signature=!0,c()}),wx.error(function(e){r.signature=!1,a({code:"fail",message:e.errMsg||e.err_desc||"jsapi配置失败"})})):c()})}},{key:"aliPay",value:function(e){return new Promise(function(n,t){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void t({message:"唤起支付宝参数错误，参数[options]："+JSON.stringify(e)});ap.tradePay(e,function(e){switch(e.code=e.resultCode,e.resultCode){case"9000":n(e);break;case"8000":case"6004":e.message="支付处理中，请稍后在您的订单中查看",t(e);break;case"6001":case"99":break;default:e.message="支付异常,请关闭页面后重试",t(e)}})})}}]),e}();"object"===i(n)&&void 0!==e?e.exports=new c:window.UniquePay=new c}).call(n,t(3))},function(e,n,t){var o=function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.installed||(n.$uniquePay=n.prototype.$uniquePay=t(o.useSdk?1:0))};"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),e.exports=o},function(e,n){function t(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(n){try{return f.call(null,e)}catch(n){return f.call(this,e)}}}function a(){p&&d&&(p=!1,d.length?y=d.concat(y):m=-1,y.length&&c())}function c(){if(!p){var e=r(a);p=!0;for(var n=y.length;n;){for(d=y,y=[];++m<n;)d&&d[m].run();m=-1,n=y.length}d=null,p=!1,i(e)}}function u(e,n){this.fun=e,this.array=n}function s(){}var l,f,g=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:t}catch(e){l=t}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,y=[],p=!1,m=-1;g.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];y.push(new u(e,n)),1!==y.length||p||r(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=s,g.addListener=s,g.once=s,g.off=s,g.removeListener=s,g.removeAllListeners=s,g.emit=s,g.prependListener=s,g.prependOnceListener=s,g.listeners=function(e){return[]},g.binding=function(e){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(e){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}}]);
//# sourceMappingURL=unique-pay.min.js.map
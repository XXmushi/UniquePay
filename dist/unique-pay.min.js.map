{"version":3,"sources":["webpack:///unique-pay.min.js","webpack:///webpack/bootstrap af876683bfc3871d3ab5","webpack:///./src/UniquePay.js","webpack:///./src/UniquePay.sdk.js","webpack:///./src/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_$UniquePay","this","$globalConfig","navigator","window","isWechat","userAgent","match","isAlipay","options","wechatPay","aliPay","alert","Promise","resolve","reject","toString","message","JSON","stringify","_onBridgeReady","then","WeixinJSBridge","invoke","res","err_msg","code","split","errMsg","err_desc","AlipayJSBridge","result","resultCode","document","addEventListener","attachEvent","UniquePay","init","loadJS","path","console","error","a","createElement","src","location","protocol","onload","log","onerror","getElementsByTagName","parentNode","insertBefore","signatureConfig","_this","_wixinPay","success","cancel","fail","wx","chooseWXPay","signature","debug","jsApiList","config","ready","ap","tradePay","install","Vue","arguments","undefined","installed","$uniquePay","useSdk","use"],"mappings":"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","file":"unique-pay.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\r\n * 支付聚合\r\n * @Author: liangzc \r\n * @Date: 2018-01-12\r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 10:43:19\r\n */\nvar _$UniquePay = function () {\n  function _$UniquePay() {\n    _classCallCheck(this, _$UniquePay);\n\n    if (typeof $globalConfig === 'undefined' || !$globalConfig.navigator) {\n      window.$globalConfig = {\n        navigator: {\n          isWechat: navigator.userAgent.match(/(MicroMessenger)\\/([\\d\\.]+)/i) !== null,\n          isAlipay: navigator.userAgent.match(/(AlipayClient)\\/([\\d\\.]+)/i) !== null\n        }\n      };\n    }\n  }\n\n  /**\r\n     * 唤起支付\r\n     * @param {Object} options 支付参数，参考各支付平台支付文档\r\n     * \r\n     * @returns {Promise}\r\n     */\n\n\n  _createClass(_$UniquePay, [{\n    key: 'pay',\n    value: function pay(options) {\n      return $globalConfig.navigator.isWechat ? this.wechatPay(options) : $globalConfig.navigator.isAlipay ? this.aliPay(options) : function () {\n        return alert('请用微信或支付宝打开');\n      };\n    }\n\n    /**\r\n       * 调起微信支付\r\n       * @param {Object} options 支付参数，参考微信官方支付文档\r\n       * @{options}  timestamp 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n       * @{options}  nonceStr 支付签名随机串，不长于 32 位\r\n       * @{options}  package 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n       * @{options}  signType 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n       * @{options}  paySi gn 支付签名\r\n       * \r\n       * @returns {Promise}\r\n       */\n\n  }, {\n    key: 'wechatPay',\n    value: function wechatPay(options) {\n      return new Promise(function (resolve, reject) {\n        if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\n          reject({ message: '唤起微信支付参数错误，参数[options]：' + JSON.stringify(options) });\n          return;\n        }\n        _onBridgeReady().then(function () {\n          WeixinJSBridge.invoke('getBrandWCPayRequest', options, function (res) {\n            if (res.err_msg == 'get_brand_wcpay_request:ok') {\n              //支付成功\n              resolve({\n                code: (res.err_msg || '').split(':')[1] || 'ok',\n                message: res.errMsg || res.err_desc || ''\n              });\n            } else {\n              reject({\n                code: (res.err_msg || '').split(':')[1] || 'fail',\n                message: res.errMsg || res.err_desc || '支付失败'\n              });\n            }\n          });\n        });\n      });\n    }\n\n    /**\r\n       * 调起支付宝支付\r\n       * @param {Object} options 支付参数（tradeNO/orderStr），参考支付宝官方支付文档\r\n       * @{options} tradeNO 交易号\r\n       * @{options} orderStr 交易字符串\r\n       * \r\n       * @returns {Promise}\r\n       */\n\n  }, {\n    key: 'aliPay',\n    value: function aliPay(options) {\n      return new Promise(function (resolve, reject) {\n        if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\n          reject({ message: '唤起支付宝参数错误，参数[options]：' + JSON.stringify(options) });\n          return;\n        }\n        _onBridgeReady().then(function () {\n          AlipayJSBridge.call('tradePay', options, function (result) {\n            result.code = result.resultCode;\n            switch (result.resultCode) {\n              case '9000':\n                //支付成功\n                resolve(result);\n                break;\n              case '8000': //后台获取支付结果超时，暂时未拿到支付结果\n              case '6004':\n                //支付过程中网络出错， 暂时未拿到支付结果\n                result.message = '支付处理中，请稍后在您的订单中查看';\n                reject(result);\n                break;\n              case '6001': //用户中途取消\n              case '99':\n                //用户点击忘记密码快捷界面退出(only iOS since 9.5)\n                break;\n              default:\n                result.message = '支付异常,请关闭页面后重试';\n                reject(result);\n                break;\n            }\n          });\n        });\n      });\n    }\n  }]);\n\n  return _$UniquePay;\n}();\n\n/**\r\n * 桥接过渡函数\r\n * \r\n * @returns {Promise}\r\n */\n\n\nvar _onBridgeReady = function _onBridgeReady() {\n  return new Promise(function (resolve, reject) {\n    if ($globalConfig.navigator.isWechat) {\n      if (typeof WeixinJSBridge === 'undefined') {\n        if (document.addEventListener) {\n          document.addEventListener('WeixinJSBridgeReady', resolve, false);\n        } else if (document.attachEvent) {\n          document.attachEvent('WeixinJSBridgeReady', resolve);\n          document.attachEvent('onWeixinJSBridgeReady', resolve);\n        }\n      } else {\n        resolve();\n      }\n    } else if ($globalConfig.navigator.isAlipay) {\n      if (window.AlipayJSBridge) {\n        resolve();\n      } else {\n        document.addEventListener('AlipayJSBridgeReady', resolve, false);\n      }\n    }\n  });\n};\n\n( false ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = new _$UniquePay() : window.UniquePay = new _$UniquePay();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\r\n * 支付聚合\r\n * @Author: liangzc \r\n * @Date: 2018-01-12\r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 10:37:14\r\n */\nvar _$UniquePay = function () {\n  function _$UniquePay() {\n    _classCallCheck(this, _$UniquePay);\n\n    if (typeof $globalConfig === 'undefined' || !$globalConfig.navigator) {\n      window.$globalConfig = {\n        navigator: {\n          isWechat: navigator.userAgent.match(/(MicroMessenger)\\/([\\d\\.]+)/i) !== null,\n          isAlipay: navigator.userAgent.match(/(AlipayClient)\\/([\\d\\.]+)/i) !== null\n        }\n      };\n    }\n    this.init();\n  }\n\n  /**\r\n     * 初始化\r\n     */\n\n\n  _createClass(_$UniquePay, [{\n    key: 'init',\n    value: function init() {\n      if ($globalConfig.navigator.isWechat || $globalConfig.navigator.isAlipay) {\n        this.loadJS($globalConfig.navigator.isWechat ? '//res.wx.qq.com/open/js/jweixin-1.2.0.js' : '//a.alipayobjects.com/g/component/antbridge/1.1.4/antbridge.min.js');\n      }\n    }\n\n    /**\r\n       * 加载 js 文件\r\n       * @param {String} path js相对路径 \r\n       */\n\n  }, {\n    key: 'loadJS',\n    value: function loadJS(path) {\n      if (!path || path === '') {\n        console.error('UniquePay init fail , path : null');\n        return;\n      }\n      var a = document.createElement('script');\n      a.src = location.protocol + path;\n      a.onload = function () {\n        console.log('UniquePay init success !!! ');\n      };\n      a.onerror = function () {\n        console.error('UniquePay init fail , path : ', path);\n      };\n      var c = document.getElementsByTagName('script')[0];\n      c.parentNode.insertBefore(a, c);\n    }\n\n    /**\r\n       * 唤起支付\r\n       * @param {Object} options 支付参数，参考各支付平台\r\n       * @param {Object} signatureConfig 仅限微信 jssdk，签名配置信息，参考微信官方 jssdk 文档\r\n       * \r\n       * @returns {Promise}\r\n       */\n\n  }, {\n    key: 'pay',\n    value: function pay(options, signatureConfig) {\n      return $globalConfig.navigator.isWechat ? this.wechatPay(options, signatureConfig) : $globalConfig.navigator.isAlipay ? this.aliPay(options) : function () {\n        return alert('请用微信或支付宝打开');\n      };\n    }\n\n    /**\r\n       * 调起微信支付\r\n       * @param {Object} options 微信支付参数，参考微信官方支付文档\r\n       * @{options}  timestamp 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n       * @{options}  nonceStr 支付签名随机串，不长于 32 位\r\n       * @{options}  package 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n       * @{options}  signType 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n       * @{options}  paySi gn 支付签名\r\n       * \r\n       * @param {Object} signatureConfig 签名配置信息，参考微信官方 jssdk 文档\r\n       * \r\n       * @returns {Promise}\r\n       */\n\n  }, {\n    key: 'wechatPay',\n    value: function wechatPay(options, signatureConfig) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\n          reject({ message: '唤起微信支付参数错误，参数[options]：' + JSON.stringify(options) });\n          return;\n        }\n        //唤起支付\n        var _wixinPay = function _wixinPay() {\n          options.success = function (res) {\n            resolve({\n              code: (res.err_msg || '').split(':')[1] || 'ok',\n              message: res.errMsg || res.err_desc || ''\n            });\n          };\n          options.cancel = function (res) {\n            reject({\n              code: (res.err_msg || '').split(':')[1] || 'cancel',\n              message: res.errMsg || res.err_desc || '支付取消'\n            });\n          };\n          options.fail = function (res) {\n            reject({\n              code: (res.err_msg || '').split(':')[1] || 'fail',\n              message: res.errMsg || res.err_desc || '支付失败'\n            });\n          };\n          wx.chooseWXPay(options);\n        };\n\n        if (_this.signature !== true && signatureConfig) {\n          //未注入签名数据\n          signatureConfig.debug = \"production\" !== 'production';\n          signatureConfig.jsApiList = ['checkJsApi', 'chooseWXPay'];\n          wx.config(signatureConfig);\n          wx.ready(function () {\n            _this.signature = true;\n            // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。\n            _wixinPay();\n          });\n          wx.error(function (res) {\n            _this.signature = false;\n            reject({\n              code: 'fail',\n              message: res.errMsg || res.err_desc || 'jsapi配置失败'\n            });\n          });\n        } else {\n          _wixinPay();\n        }\n      });\n    }\n\n    /**\r\n       * 调起支付宝支付\r\n       * @param {Object} options 支付参数（tradeNO/orderStr），参考支付宝官方支付文档\r\n       * @{options} tradeNO 交易号\r\n       * @{options} orderStr 交易字符串\r\n       * \r\n       * @returns {Promise}\r\n       */\n\n  }, {\n    key: 'aliPay',\n    value: function aliPay(options) {\n      return new Promise(function (resolve, reject) {\n        if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\n          reject({ message: '唤起支付宝参数错误，参数[options]：' + JSON.stringify(options) });\n          return;\n        }\n        ap.tradePay(options, function (result) {\n          result.code = result.resultCode;\n          switch (result.resultCode) {\n            case '9000':\n              //支付成功\n              resolve(result);\n              break;\n            case '8000': //后台获取支付结果超时，暂时未拿到支付结果\n            case '6004':\n              //支付过程中网络出错， 暂时未拿到支付结果\n              result.message = '支付处理中，请稍后在您的订单中查看';\n              reject(result);\n              break;\n            case '6001': //用户中途取消\n            case '99':\n              //用户点击忘记密码快捷界面退出(only iOS since 9.5)\n              break;\n            default:\n              result.message = '支付异常,请关闭页面后重试';\n              reject(result);\n              break;\n          }\n        });\n      });\n    }\n  }]);\n\n  return _$UniquePay;\n}();\n\n( false ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = new _$UniquePay() : window.UniquePay = new _$UniquePay();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\r\n * @Author: liangzc \r\n * @Date: 2018-02-09 \r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 11:04:02\r\n */\n/**\r\n * @param {Vue} Vue \r\n * @param {Object} options {useSdk: Boolean} 是否使用对应平台的 jssdk\r\n */\nvar install = function install(Vue) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (install.installed) return;\n  Vue.$uniquePay = Vue.prototype.$uniquePay = __webpack_require__(options.useSdk ? 1 : 0); //添加vm实例验证属性\n};\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(install);\n}\nmodule.exports = install;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// unique-pay.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap af876683bfc3871d3ab5","/*\r\n * 支付聚合\r\n * @Author: liangzc \r\n * @Date: 2018-01-12\r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 10:43:19\r\n */\r\nclass _$UniquePay {\r\n  constructor() {\r\n    if (typeof $globalConfig === 'undefined' || !$globalConfig.navigator) {\r\n      window.$globalConfig = {\r\n        navigator: {\r\n          isWechat: navigator.userAgent.match(/(MicroMessenger)\\/([\\d\\.]+)/i) !== null,\r\n          isAlipay: navigator.userAgent.match(/(AlipayClient)\\/([\\d\\.]+)/i) !== null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 唤起支付\r\n     * @param {Object} options 支付参数，参考各支付平台支付文档\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  pay(options) {\r\n    return $globalConfig.navigator.isWechat ? this.wechatPay(options) : $globalConfig.navigator.isAlipay ? this.aliPay(options) : () => alert('请用微信或支付宝打开');\r\n  }\r\n\r\n  /**\r\n     * 调起微信支付\r\n     * @param {Object} options 支付参数，参考微信官方支付文档\r\n     * @{options}  timestamp 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n     * @{options}  nonceStr 支付签名随机串，不长于 32 位\r\n     * @{options}  package 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n     * @{options}  signType 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n     * @{options}  paySi gn 支付签名\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  wechatPay(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\r\n        reject({ message: '唤起微信支付参数错误，参数[options]：' + JSON.stringify(options) });\r\n        return;\r\n      }\r\n      _onBridgeReady().then(() => {\r\n        WeixinJSBridge.invoke('getBrandWCPayRequest', options, res => {\r\n          if (res.err_msg == 'get_brand_wcpay_request:ok') { //支付成功\r\n            resolve({\r\n              code: (res.err_msg || '').split(':')[1] || 'ok',\r\n              message: res.errMsg || res.err_desc || ''\r\n            });\r\n          } else {\r\n            reject({\r\n              code: (res.err_msg || '').split(':')[1] || 'fail',\r\n              message: res.errMsg || res.err_desc || '支付失败'\r\n            });\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n     * 调起支付宝支付\r\n     * @param {Object} options 支付参数（tradeNO/orderStr），参考支付宝官方支付文档\r\n     * @{options} tradeNO 交易号\r\n     * @{options} orderStr 交易字符串\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  aliPay(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\r\n        reject({ message: '唤起支付宝参数错误，参数[options]：' + JSON.stringify(options) });\r\n        return;\r\n      }\r\n      _onBridgeReady().then(() => {\r\n        AlipayJSBridge.call('tradePay', options, result => {\r\n          result.code = result.resultCode;\r\n          switch (result.resultCode) {\r\n            case '9000': //支付成功\r\n              resolve(result);\r\n              break;\r\n            case '8000': //后台获取支付结果超时，暂时未拿到支付结果\r\n            case '6004': //支付过程中网络出错， 暂时未拿到支付结果\r\n              result.message = '支付处理中，请稍后在您的订单中查看';\r\n              reject(result);\r\n              break;\r\n            case '6001': //用户中途取消\r\n            case '99': //用户点击忘记密码快捷界面退出(only iOS since 9.5)\r\n              break;\r\n            default:\r\n              result.message = '支付异常,请关闭页面后重试';\r\n              reject(result);\r\n              break;\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * 桥接过渡函数\r\n * \r\n * @returns {Promise}\r\n */\r\nlet _onBridgeReady = () => {\r\n  return new Promise((resolve, reject) => {\r\n    if ($globalConfig.navigator.isWechat) {\r\n      if (typeof WeixinJSBridge === 'undefined') {\r\n        if (document.addEventListener) {\r\n          document.addEventListener('WeixinJSBridgeReady', resolve, false);\r\n        } else if (document.attachEvent) {\r\n          document.attachEvent('WeixinJSBridgeReady', resolve);\r\n          document.attachEvent('onWeixinJSBridgeReady', resolve);\r\n        }\r\n      } else {\r\n        resolve();\r\n      }\r\n    } else if ($globalConfig.navigator.isAlipay) {\r\n      if (window.AlipayJSBridge) {\r\n        resolve();\r\n      } else {\r\n        document.addEventListener('AlipayJSBridgeReady', resolve, false);\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = new _$UniquePay() : window.UniquePay = new _$UniquePay();\n\n\n// WEBPACK FOOTER //\n// ./src/UniquePay.js","/*\r\n * 支付聚合\r\n * @Author: liangzc \r\n * @Date: 2018-01-12\r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 10:37:14\r\n */\r\nclass _$UniquePay {\r\n  constructor() {\r\n    if (typeof $globalConfig === 'undefined' || !$globalConfig.navigator) {\r\n      window.$globalConfig = {\r\n        navigator: {\r\n          isWechat: navigator.userAgent.match(/(MicroMessenger)\\/([\\d\\.]+)/i) !== null,\r\n          isAlipay: navigator.userAgent.match(/(AlipayClient)\\/([\\d\\.]+)/i) !== null\r\n        }\r\n      }\r\n    }\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n     * 初始化\r\n     */\r\n  init() {\r\n    if ($globalConfig.navigator.isWechat || $globalConfig.navigator.isAlipay) {\r\n      this.loadJS($globalConfig.navigator.isWechat ? '//res.wx.qq.com/open/js/jweixin-1.2.0.js' : '//a.alipayobjects.com/g/component/antbridge/1.1.4/antbridge.min.js');\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 加载 js 文件\r\n     * @param {String} path js相对路径 \r\n     */\r\n  loadJS(path) {\r\n    if (!path || path === '') {\r\n      console.error('UniquePay init fail , path : null');\r\n      return;\r\n    }\r\n    let a = document.createElement('script');\r\n    a.src = location.protocol + path;\r\n    a.onload = () => {\r\n      console.log('UniquePay init success !!! ');\r\n    };\r\n    a.onerror = () => {\r\n      console.error('UniquePay init fail , path : ', path);\r\n    };\r\n    let c = document.getElementsByTagName('script')[0];\r\n    c.parentNode.insertBefore(a, c);\r\n  }\r\n\r\n  /**\r\n     * 唤起支付\r\n     * @param {Object} options 支付参数，参考各支付平台\r\n     * @param {Object} signatureConfig 仅限微信 jssdk，签名配置信息，参考微信官方 jssdk 文档\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  pay(options, signatureConfig) {\r\n    return $globalConfig.navigator.isWechat ? this.wechatPay(options, signatureConfig) : $globalConfig.navigator.isAlipay ? this.aliPay(options) : () => alert('请用微信或支付宝打开');\r\n  }\r\n\r\n  /**\r\n     * 调起微信支付\r\n     * @param {Object} options 微信支付参数，参考微信官方支付文档\r\n     * @{options}  timestamp 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n     * @{options}  nonceStr 支付签名随机串，不长于 32 位\r\n     * @{options}  package 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n     * @{options}  signType 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n     * @{options}  paySi gn 支付签名\r\n     * \r\n     * @param {Object} signatureConfig 签名配置信息，参考微信官方 jssdk 文档\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  wechatPay(options, signatureConfig) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\r\n        reject({ message: '唤起微信支付参数错误，参数[options]：' + JSON.stringify(options) });\r\n        return;\r\n      }\r\n      //唤起支付\r\n      let _wixinPay = () => {\r\n        options.success = res => {\r\n          resolve({\r\n            code: (res.err_msg || '').split(':')[1] || 'ok',\r\n            message: res.errMsg || res.err_desc || ''\r\n          });\r\n        };\r\n        options.cancel = res => {\r\n          reject({\r\n            code: (res.err_msg || '').split(':')[1] || 'cancel',\r\n            message: res.errMsg || res.err_desc || '支付取消'\r\n          });\r\n        };\r\n        options.fail = res => {\r\n          reject({\r\n            code: (res.err_msg || '').split(':')[1] || 'fail',\r\n            message: res.errMsg || res.err_desc || '支付失败'\r\n          });\r\n        };\r\n        wx.chooseWXPay(options);\r\n      };\r\n\r\n      if (this.signature !== true && signatureConfig) { //未注入签名数据\r\n        signatureConfig.debug = process.env.NODE_ENV !== 'production';\r\n        signatureConfig.jsApiList = ['checkJsApi', 'chooseWXPay'];\r\n        wx.config(signatureConfig);\r\n        wx.ready(() => {\r\n          this.signature = true;\r\n          // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。\r\n          _wixinPay();\r\n        });\r\n        wx.error(res => {\r\n          this.signature = false;\r\n          reject({\r\n            code: 'fail',\r\n            message: res.errMsg || res.err_desc || 'jsapi配置失败'\r\n          });\r\n        })\r\n      } else {\r\n        _wixinPay();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n     * 调起支付宝支付\r\n     * @param {Object} options 支付参数（tradeNO/orderStr），参考支付宝官方支付文档\r\n     * @{options} tradeNO 交易号\r\n     * @{options} orderStr 交易字符串\r\n     * \r\n     * @returns {Promise}\r\n     */\r\n  aliPay(options) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!options || Object.prototype.toString.call(options) !== '[object Object]') {\r\n        reject({ message: '唤起支付宝参数错误，参数[options]：' + JSON.stringify(options) });\r\n        return;\r\n      }\r\n      ap.tradePay(options, result => {\r\n        result.code = result.resultCode;\r\n        switch (result.resultCode) {\r\n          case '9000': //支付成功\r\n            resolve(result);\r\n            break;\r\n          case '8000': //后台获取支付结果超时，暂时未拿到支付结果\r\n          case '6004': //支付过程中网络出错， 暂时未拿到支付结果\r\n            result.message = '支付处理中，请稍后在您的订单中查看';\r\n            reject(result);\r\n            break;\r\n          case '6001': //用户中途取消\r\n          case '99': //用户点击忘记密码快捷界面退出(only iOS since 9.5)\r\n            break;\r\n          default:\r\n            result.message = '支付异常,请关闭页面后重试';\r\n            reject(result);\r\n            break;\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = new _$UniquePay() : window.UniquePay = new _$UniquePay();\n\n\n// WEBPACK FOOTER //\n// ./src/UniquePay.sdk.js","/*\r\n * @Author: liangzc \r\n * @Date: 2018-02-09 \r\n * @Last Modified by: liangzc\r\n * @Last Modified time: 2018-02-11 11:04:02\r\n */\r\n/**\r\n * @param {Vue} Vue \r\n * @param {Object} options {useSdk: Boolean} 是否使用对应平台的 jssdk\r\n */\r\nlet install = function (Vue, options = {}) {\r\n  if (install.installed) return;\r\n  Vue.$uniquePay = Vue.prototype.$uniquePay = require(options.useSdk ? './UniquePay.sdk' : './UniquePay'); //添加vm实例验证属性\r\n};\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  window.Vue.use(install);\r\n}\r\nmodule.exports = install;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}